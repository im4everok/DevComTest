@using BLL.Interfaces;
@using BLL.Models;
@model IEnumerable<PersonModel>;
@inject IPersonService PersonService;

@{
    ViewData["Title"] = "All users";
}

<h1 class="text-center">Search result</h1>

<br />
<div class="align-content-center justify-content-center">
    <table class="table table-striped table-bordered">
        <thead>
            <tr>
                <th>Name</th>
                <th>Pets Count</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var p in Model)
            {
                if (p != null)
                {
                    <tr>
                        <td>@Html.ActionLink(p.Name, "Details", "Person", new { id = p.Id })</td>
                        <td>@await PersonService.GetPersonPetCountAsync(p.Id)</td>
                    </tr>
                }
            }
        </tbody>
    </table>
</div>
@Html.ActionLink("Back to all users", "AllUsers", "Person");